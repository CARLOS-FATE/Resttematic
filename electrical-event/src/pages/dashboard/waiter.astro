---
// src/pages/dashboard/waiter.astro


import DashboardWrapper from '../../components/DashboardWrapper.client.jsx';
import DashboardLayout from '../../layouts/DashboardLayout.astro';
// L칩gica de protecci칩n (sigue igual)
const allowedRoles = ['mesero', 'due침o']; // o 'due침o' si lo normalizaste
const token = Astro.cookies.get('token')?.value;
const userRole = Astro.cookies.get('role')?.value;

if (!token || !userRole || !allowedRoles.includes(userRole)) {
  return Astro.redirect('/login', 307);
}
---

<DashboardLayout title="Panel de Mesero">
  <DashboardWrapper userRole={userRole} client:load />
</DashboardLayout>
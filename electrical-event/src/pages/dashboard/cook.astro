---
// src/pages/dashboard/cook.astro

import Layout from '../../layouts/Layout.astro';
import DashboardWrapper from '../../components/DashboardWrapper.client.jsx';
import DashboardLayout from '../../layouts/DashboardLayout.astro';
// Lógica de protección (esto está perfecto)
const allowedRoles = ['cocinero', 'dueno'];
const token = Astro.cookies.get('token')?.value;
const userRole = Astro.cookies.get('role')?.value;

if (!token || !userRole || !allowedRoles.includes(userRole)) {
  return Astro.redirect('/login', 307);
  
  }
---

<DashboardLayout title="Comandas de Cocina">
  {/* Esta es la estructura final y correcta */}
  {/* Ahora solo llamamos a nuestro envoltorio con su rol correspondiente */}
  <DashboardWrapper userRole={userRole} client:load />
</DashboardLayout>
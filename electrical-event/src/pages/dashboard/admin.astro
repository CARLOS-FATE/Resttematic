---
// src/pages/dashboard/admin.astro

import DashboardWrapper from '../../components/DashboardWrapper.client.jsx';
import DashboardLayout from '../../layouts/DashboardLayout.astro';

const allowedRoles = ['due√±o', 'administrador'];

const token = Astro.cookies.get('token')?.value;
const userRole = Astro.cookies.get('role')?.value;

if (!token || !userRole || !allowedRoles.includes(userRole)) {
  return Astro.redirect('/login', 307);
}

---

<DashboardLayout  title="Panel de Administrador">
  {/* Ahora solo llamamos a nuestro envoltorio con su rol correspondiente */}
  <DashboardWrapper userRole={userRole} client:load />
</DashboardLayout >
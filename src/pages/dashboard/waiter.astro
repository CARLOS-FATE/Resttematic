---
// src/pages/dashboard/waiter.astro


import DashboardWrapper from '../../components/DashboardWrapper.client.jsx';
import DashboardLayout from '../../layouts/DashboardLayout.astro';
// Lógica de protección (sigue igual)
const allowedRoles = ['mesero', 'dueno']; // o 'dueno' si lo normalizaste
const token = Astro.cookies.get('token')?.value;
const userRole = Astro.cookies.get('role')?.value;

if (!token || !userRole || !allowedRoles.includes(userRole)) {
  return Astro.redirect('/login', 307);
}
---

<DashboardLayout title="Panel de Mesero">
  <DashboardWrapper userRole={userRole} client:load />
</DashboardLayout>